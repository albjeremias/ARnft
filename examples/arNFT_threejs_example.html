
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>ARnft example showing an simple red cube</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=0.5, maximum-scale=1">
	<link rel="stylesheet" href="css/nft-style.css">
</head>
<body>

      <a
          href="https://raw.githubusercontent.com/artoolkitx/artoolkit5/master/doc/Marker%20images/pinball.jpg"
          class="ui marker"
          target="_blank">
          ðŸ–¼ Marker Image
      </a>

  <script src="js/third_party/three.js/three.min.js"></script>
  <!--<script type="module" src="https://raw.githack.com/kalwalt/ARnft-threejs/main/dist/ARnftThreejs.js"></script>-->
	<script type="module" src="../dist/ARnft.js"></script>


    <script>

	async function init() {
		console.log("init app");
	
		let cameraDataURL = '../../data/camera_para.dat';
		let video = document.getElementById('video');
        console.log( ARnft);

		const arnft = new ARnft.ARnft('config.json', cameraDataURL, "./DataNFT/pinball");
		//arnft.setFPS(15);
		let videoData = {
			"marker": "./data/pinball",
			"video": "./data/test.mp4"
		}
		// let video = await ARNFT.BasicVideoLoaderBJS.load(videoMarker.video, renderer.getScene());
		//let videoMarker = new ARNFT.NFTVideoBJS(video);

		console.log(ARnftThreejs);
		console.log(arnft);
        let config = {
            "addPath": "",
            "cameraPara": "examples/Data/camera_para.dat",
            "videoSettings": {
                "width": {
                    "min": 640,
                    "max": 800
                },
                "height": {
                    "min": 480,
                    "max": 600
                },
                "facingMode": "environment"
            },
            "loading": {
                "logo": {
                    "src": "Data/arNFT-logo.gif",
                    "alt": "arNFT.js logo"
                },
            "loadingMessage": "Loading, please wait..."
            },
            "renderer": {
                "type": "three",
                "alpha": true,
                "antialias": true,
                "context": null,
                "precision": "mediump",
                "premultipliedAlpha": true,
                "stencil": true,
                "depth": true,
                "logarithmicDepthBuffer": true
            },
            "camera": {
                "fov": "0.8 * 180 / Math.PI",
                "ratio": "window.clientWidth / window.clientHeight",
                "near": 0.01,
                "far": 1000
            }
        }
		let canvas = document.getElementById('canvas');
        let root = new THREE.Object3D()
        let camera = new THREE.Camera()
		//let sceneThreejs = new ARnftThreejs.SceneRendererTJS(config, canvas, root, camera);
		//let entityRoot = new ARnftThreejs.NFTNodeTJS();
        //console.log(entityRoot);
        sceneThreejs.initRenderer();
        sceneThreejs.draw()

        let data;
        //arnft.getConf("config.json", data)

		await arnft.initialize();
		
		console.log("done loading")
	
		//console.log(sceneThreejs.scene)
        
		//let imageMarker = new ARnftThreejs.NFTImageTJS(root);
		
		//imageMarker.addNFTImage("./Data/aframe-k.png", 120, 120);
	
		//let marker = "./DataNFT/pinball";

		//  update loop taken out of ARnft for ease of dev use.   i.e.  What if i wanted to pause the experince?
		var tick = () => {
			//arnft.update();
			//sceneThreejs.update();
			setTimeout(tick, 1000 / 60);
		};
		tick();

	}

    </script>
		<body onload="init()" style="background-color:#D4D4D4;margin:0px;">
		  <div id="inspector">
		    <div id="app">
		      <video loop autoplay muted playsinline id="video">
		      </video>
		      <canvas id="canvas"></canvas>
		    </div>
		  </div>
		</body>


</html>
